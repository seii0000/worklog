(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[301],{2940:function(e,t,a){Promise.resolve().then(a.bind(a,9206))},9206:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var r=a(9268),o=a(6006),s=a(6862),n=a(9063),l=a(6936),d=a(8706),u=a(5825);n.kL.register(n.uw,n.f$,n.ZL,n.Dx,n.u,n.De);var i=()=>{let{user:e}=(0,u.useAuth)(),[t,a]=(0,o.useState)({labels:[],datasets:[{label:"Total Work Value",data:[],backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]}),[n,i]=(0,o.useState)(""),[c,p]=(0,o.useState)("");return(0,o.useEffect)(()=>{let t=async()=>{if(!e)return;let t=(0,l.IO)((0,l.hJ)(d.db,"worklogs"),(0,l.ar)("userId","==",e.uid));n&&(t=(0,l.IO)(t,(0,l.ar)("date",">=",n))),c&&(t=(0,l.IO)(t,(0,l.ar)("date","<=",c)));let r=await (0,l.PL)(t),o={};r.forEach(e=>{let{date:t,price:a}=e.data();o[t]?o[t]+=a:o[t]=a});let s=Object.keys(o),u=Object.values(o);a({labels:s,datasets:[{label:"Total Work Value",data:u,backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]})};t()},[e,n,c]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-center mb-4",children:[(0,r.jsx)("input",{type:"date",value:n,onChange:e=>i(e.target.value),className:"mr-2 p-2 border rounded"}),(0,r.jsx)("input",{type:"date",value:c,onChange:e=>p(e.target.value),className:"p-2 border rounded"})]}),(0,r.jsx)(s.$Q,{data:t,options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Total Work Value by Date"}}}})]})};n.kL.register(n.uw,n.f$,n.ZL,n.Dx,n.u,n.De);var c=()=>{let[e,t]=(0,o.useState)({labels:[],datasets:[]}),[a,n]=(0,o.useState)(""),[u,i]=(0,o.useState)("");return(0,o.useEffect)(()=>{let e=async()=>{let e=await (0,l.PL)((0,l.hJ)(d.db,"userMap")),r={};e.forEach(e=>{let{name:t}=e.data();r[e.id]=t});let o=(0,l.IO)((0,l.hJ)(d.db,"worklogs"));a&&(o=(0,l.IO)(o,(0,l.ar)("date",">=",a))),u&&(o=(0,l.IO)(o,(0,l.ar)("date","<=",u)));let s=await (0,l.PL)(o),n={};s.forEach(e=>{let{date:t,price:a,userId:r}=e.data();n[t]||(n[t]={}),n[t][r]?n[t][r]+=a:n[t][r]=a});let i=Object.keys(n),c=new Set,p=[];i.forEach(e=>{Object.keys(n[e]).forEach(e=>{c.add(e)})}),c.forEach(e=>{let t={label:r[e]||e,data:i.map(t=>n[t][e]||0),backgroundColor:"rgba(".concat(Math.floor(255*Math.random()),", ").concat(Math.floor(255*Math.random()),", ").concat(Math.floor(255*Math.random()),", 0.6)"),borderColor:"rgba(".concat(Math.floor(255*Math.random()),", ").concat(Math.floor(255*Math.random()),", ").concat(Math.floor(255*Math.random()),", 1)"),borderWidth:1};p.push(t)}),t({labels:i,datasets:p})};e()},[a,u]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-center mb-4",children:[(0,r.jsx)("input",{type:"date",value:a,onChange:e=>n(e.target.value),className:"mr-2 p-2 border rounded"}),(0,r.jsx)("input",{type:"date",value:u,onChange:e=>i(e.target.value),className:"p-2 border rounded"})]}),(0,r.jsx)(s.$Q,{data:e,options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Total Work Value by Date and User"}},scales:{x:{stacked:!0},y:{stacked:!0}}}})]})},p=()=>{let{user:e}=(0,u.useAuth)();return(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h1",{children:"Home Page"}),e&&"thanhkthp2710@gmail.com"===e.email?(0,r.jsx)(c,{}):(0,r.jsx)(i,{})]})}},5825:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthContextProvider:function(){return u},useAuth:function(){return i}});var r=a(9268),o=a(6006),s=a(4734),n=a(8706),l=a(6936);let d=(0,o.createContext)(),u=e=>{let{children:t}=e,[a,u]=(0,o.useState)(null),i=async()=>{let e=new s.hJ;try{let t=await (0,s.rh)(n.I,e),a=t.user;await (0,l.pl)((0,l.JU)(n.db,"employees",a.uid),{name:a.displayName,email:a.email,photoURL:a.photoURL,uid:a.uid}),await (0,l.pl)((0,l.JU)(n.db,"userMap",a.uid),{name:a.displayName}),u(a)}catch(e){console.error("Error signing in with Google:",e)}};return(0,o.useEffect)(()=>{let e=(0,s.Aj)(n.I,e=>{u(e)});return()=>e()},[]),(0,r.jsx)(d.Provider,{value:{user:a,googleSignIn:i,logOut:()=>{(0,s.w7)(n.I)}},children:t})},i=()=>(0,o.useContext)(d)},8706:function(e,t,a){"use strict";a.d(t,{I:function(){return l},db:function(){return d}});var r=a(1313),o=a(4734),s=a(6936);let n=(0,r.ZF)({apiKey:"AIzaSyBvKkpUNy1KqyE2LzZZKic1vu4pody4fGU",authDomain:"nextjs-worklog-app.firebaseapp.com",projectId:"nextjs-worklog-app",storageBucket:"nextjs-worklog-app.firebasestorage.app",messagingSenderId:"50437099751",appId:"1:50437099751:web:4f5c728f2c6756f262d242"}),l=(0,o.v0)(n),d=(0,s.ad)(n)}},function(e){e.O(0,[662,913,804,661,623,253,769,744],function(){return e(e.s=2940)}),_N_E=e.O()}]);