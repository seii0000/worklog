(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{6481:function(e,r,t){Promise.resolve().then(t.bind(t,2230))},2230:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var s=t(9268),a=t(6006),l=t(415),d=t(6936),n=t(8706),i=t(4416);let o=a.forwardRef(function(e,r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r},e),a.createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"}))});var c=()=>{let{admin:e}=(0,l.useAdminAuth)(),[r,t]=(0,a.useState)(!0),[c,x]=(0,a.useState)([]),[u,g]=(0,a.useState)([]),[m,b]=(0,a.useState)([]),[h,p]=(0,a.useState)({}),[f,y]=(0,a.useState)(""),[j,w]=(0,a.useState)(""),[N,v]=(0,a.useState)(""),[k,C]=(0,a.useState)(""),[S,L]=(0,a.useState)(""),[E,I]=(0,a.useState)(""),[U,D]=(0,a.useState)(""),[A,P]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!e)return;let r=(0,d.IO)((0,d.hJ)(n.db,"employees")),s=(0,d.cf)(r,e=>{let r=e.docs.map(e=>({id:e.id,...e.data()})),t=r.filter(e=>"thanhkthp2710@gmail.com"!==e.email);x(t);let s={};t.forEach(e=>{s[e.uid]=e.name}),p(s)}),a=(0,d.IO)((0,d.hJ)(n.db,"worklogs")),l=(0,d.cf)(a,e=>{let r=e.docs.map(e=>({id:e.id,...e.data()}));g(r),b(r),t(!1)});return()=>{s(),l()}},[e]);let _=()=>{let e=u;if(f){let r=new Date(f);e=e.filter(e=>new Date(e.date)>=r)}if(j){let r=new Date(j);e=e.filter(e=>new Date(e.date)<=r)}N&&(e=e.filter(e=>e.task.toLowerCase().includes(N.toLowerCase()))),k&&(e=e.filter(e=>e.source.toLowerCase().includes(k.toLowerCase()))),S&&(e=e.filter(e=>e.product.toLowerCase().includes(S.toLowerCase()))),E&&(e=e.filter(e=>e.price===parseFloat(E))),U&&(e=e.filter(e=>e.userId===U)),b(e)};(0,a.useEffect)(()=>{_()},[f,j,N,u,k,S,E,U]);let O=(e,r)=>e.length>r?e.substring(0,r)+"...":e,Z=e=>{P(e)},z=()=>{P(null)};return r?(0,s.jsx)(i.Z,{}):e?(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Admin Dashboard"}),(0,s.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Employees"}),(0,s.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,s.jsxs)("table",{className:"min-w-full bg-white border border-gray-300",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,s.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Photo"})]})}),(0,s.jsx)("tbody",{children:c.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 border-b border-gray-300",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4 border-b border-gray-300",children:e.email}),(0,s.jsx)("td",{className:"px-6 py-4 border-b border-gray-300",children:(0,s.jsx)("img",{src:e.photoURL,alt:e.name,className:"w-10 h-10 rounded-full"})})]},e.id))})]})}),(0,s.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Worklogs"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),(0,s.jsx)("input",{type:"date",value:f,onChange:e=>y(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),(0,s.jsx)("input",{type:"date",value:j,onChange:e=>w(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Task"}),(0,s.jsx)("input",{type:"text",value:N,onChange:e=>v(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"User"}),(0,s.jsxs)("select",{value:U,onChange:e=>D(e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[(0,s.jsx)("option",{value:"",children:"All Users"}),c.map(e=>(0,s.jsx)("option",{value:e.uid,children:e.name},e.uid))]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full bg-white border border-gray-300",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,s.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task"}),(0,s.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),(0,s.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,s.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,s.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"}),(0,s.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"})]})}),(0,s.jsx)("tbody",{children:m.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>Z(e),children:[(0,s.jsx)("td",{className:"px-6 py-4 border-b border-gray-300",children:e.date}),(0,s.jsx)("td",{className:"px-6 py-4 border-b border-gray-300",children:O(e.task,50)}),(0,s.jsx)("td",{className:"px-6 py-4 border-b border-gray-300",children:O(e.source,50)}),(0,s.jsx)("td",{className:"px-6 py-4 border-b border-gray-300",children:O(e.product,50)}),(0,s.jsxs)("td",{className:"px-6 py-4 border-b border-gray-300",children:[e.price.toLocaleString("vi-VN")," đ"]}),(0,s.jsx)("td",{className:"px-6 py-4 border-b border-gray-300",children:O(e.notes,50)}),(0,s.jsx)("td",{className:"px-6 py-4 border-b border-gray-300",children:h[e.userId]||"Unknown User"})]},e.id))})]})}),A&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50",onClick:z,children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-2xl w-full relative",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{onClick:z,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700",children:(0,s.jsx)(o,{className:"h-6 w-6"})}),(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Chi tiết Worklog"}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Date:"})," ",A.date]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Task:"})," ",A.task]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Source:"})," ",A.source]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Product:"})," ",A.product]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Price:"})," ",A.price.toLocaleString("vi-VN")," đ"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Notes:"})," ",A.notes]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"User:"})," ",h[A.userId]||"Unknown User"]})]})})]}):(0,s.jsx)("p",{children:"You must be logged in to view this page - protected route."})}},4416:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var s=t(9268);t(6006);var a=t(6394),l=t.n(a),d={src:"/_next/static/media/spinner.3ed2ce77.gif",height:200,width:200,blurWidth:0,blurHeight:0},n=()=>(0,s.jsx)("div",{className:"w-full h-screen flex items-center justify-center",children:(0,s.jsx)(l(),{src:d,alt:"loading.."})})},415:function(e,r,t){"use strict";t.r(r),t.d(r,{AdminContextProvider:function(){return i},useAdminAuth:function(){return o}});var s=t(9268),a=t(6006),l=t(8706),d=t(4734);let n=(0,a.createContext)(),i=e=>{let{children:r}=e,[t,i]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=(0,d.Aj)(l.I,e=>{e&&"thanhkthp2710@gmail.com"===e.email?i(e):i(null)});return()=>e()},[]),(0,s.jsx)(n.Provider,{value:{admin:t},children:r})},o=()=>(0,a.useContext)(n)},8706:function(e,r,t){"use strict";t.d(r,{I:function(){return n},db:function(){return i}});var s=t(1313),a=t(4734),l=t(6936);let d=(0,s.ZF)({apiKey:"AIzaSyBvKkpUNy1KqyE2LzZZKic1vu4pody4fGU",authDomain:"nextjs-worklog-app.firebaseapp.com",projectId:"nextjs-worklog-app",storageBucket:"nextjs-worklog-app.firebasestorage.app",messagingSenderId:"50437099751",appId:"1:50437099751:web:4f5c728f2c6756f262d242"}),n=(0,a.v0)(d),i=(0,l.ad)(d)}},function(e){e.O(0,[662,913,661,394,253,769,744],function(){return e(e.s=6481)}),_N_E=e.O()}]);