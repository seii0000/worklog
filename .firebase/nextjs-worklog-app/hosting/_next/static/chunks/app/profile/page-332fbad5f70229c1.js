(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{67:function(){},2061:function(){},3367:function(e,t,r){Promise.resolve().then(r.bind(r,9505))},4416:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var o=r(9268);r(6006);var n=r(6394),a=r.n(n),s={src:"/_next/static/media/spinner.3ed2ce77.gif",height:200,width:200,blurWidth:0,blurHeight:0},i=()=>(0,o.jsx)("div",{className:"w-full h-screen flex items-center justify-center",children:(0,o.jsx)(a(),{src:s,alt:"loading.."})})},5825:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthContextProvider:function(){return d},useAuth:function(){return l}});var o=r(9268),n=r(6006),a=r(4734),s=r(8706),i=r(6936);let c=(0,n.createContext)(),d=e=>{let{children:t}=e,[r,d]=(0,n.useState)(null),l=async()=>{let e=new a.hJ;try{let t=await (0,a.rh)(s.I,e),r=t.user;await (0,i.pl)((0,i.JU)(s.db,"employees",r.uid),{name:r.displayName,email:r.email,photoURL:r.photoURL,uid:r.uid}),await (0,i.pl)((0,i.JU)(s.db,"userMap",r.uid),{name:r.displayName}),d(r)}catch(e){console.error("Error signing in with Google:",e)}};return(0,n.useEffect)(()=>{let e=(0,a.Aj)(s.I,e=>{d(e)});return()=>e()},[]),(0,o.jsx)(c.Provider,{value:{user:r,googleSignIn:l,logOut:()=>{(0,a.w7)(s.I)}},children:t})},l=()=>(0,n.useContext)(c)},8706:function(e,t,r){"use strict";r.d(t,{I:function(){return i},db:function(){return c}});var o=r(1313),n=r(4734),a=r(6936);let s=(0,o.ZF)({apiKey:"AIzaSyBvKkpUNy1KqyE2LzZZKic1vu4pody4fGU",authDomain:"nextjs-worklog-app.firebaseapp.com",projectId:"nextjs-worklog-app",storageBucket:"nextjs-worklog-app.firebasestorage.app",messagingSenderId:"50437099751",appId:"1:50437099751:web:4f5c728f2c6756f262d242"}),i=(0,n.v0)(s),c=(0,a.ad)(s)},9505:function(e,t,r){"use strict";r.r(t);var o=r(9268),n=r(6006),a=r(6008),s=r(5825),i=r(4416),c=r(6936),d=r(8706),l=r(9219);t.default=()=>{let{user:e}=(0,s.useAuth)(),[t,r]=(0,n.useState)(!0),[x,u]=(0,n.useState)([]),[p,g]=(0,n.useState)("en"),h=(0,a.useRouter)();(0,n.useEffect)(()=>{let e=async()=>{await new Promise(e=>setTimeout(e,50)),r(!1)};e()},[e]),(0,n.useEffect)(()=>{if(!e)return;let t=(0,c.IO)((0,c.hJ)(d.db,"worklogs"),(0,c.ar)("userId","==",e.uid),(0,c.Xo)("date","desc")),r=(0,c.cf)(t,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));u(t)});return()=>r()},[e]);let b=e=>{let t=encodeURIComponent(JSON.stringify(e));h.push("/worklog/edit?log=".concat(t))},f=async e=>{if(confirm(m[p].confirmDelete))try{await (0,c.oe)((0,c.JU)(d.db,"worklogs",e))}catch(e){console.error("Error deleting worklog:",e),alert(m[p].errorDelete)}finally{r(!1)}},m={en:{welcome:"Welcome",export:"Export to Excel",date:"Date",task:"Task",source:"Source",product:"Product",price:"Price",note:"Note",action:"Action",edit:"Edit",delete:"Delete",confirmDelete:"Are you sure you want to delete this worklog?",errorDelete:"Error deleting worklog",loginRequired:"You must be logged in to view this page - protected route."},vi:{welcome:"Ch\xe0o mừng",export:"Xuất ra Excel",date:"Ng\xe0y",task:"C\xf4ng việc",source:"Nguồn",product:"Sản phẩm",price:"Gi\xe1 th\xe0nh",note:"Ghi ch\xfa",action:"H\xe0nh động",edit:"Sửa",delete:"X\xf3a",confirmDelete:"Bạn c\xf3 chắc chắn muốn x\xf3a nhật k\xfd c\xf4ng việc n\xe0y kh\xf4ng?",errorDelete:"Lỗi khi x\xf3a nhật k\xfd c\xf4ng việc",loginRequired:"Bạn phải đăng nhập để xem trang n\xe0y - trang được bảo vệ."}},y=m[p];return t?(0,o.jsx)(i.Z,{}):e?(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsxs)("h1",{className:"text-2xl font-bold",children:[y.welcome,", ",e.displayName]}),(0,o.jsxs)("div",{className:"flex space-x-2",children:[(0,o.jsx)("button",{onClick:()=>{let e=x.map(e=>({Ngày:new Date(e.date).toLocaleDateString("vi-VN"),"C\xf4ng việc":e.task,Nguồn:e.source,"Sản phẩm":e.product,"Gi\xe1 th\xe0nh":e.price,"Ghi ch\xfa":e.notes})),t=l.P6.json_to_sheet(e),r=l.P6.book_new();l.P6.book_append_sheet(r,t,"Worklogs"),l.NC(r,"worklogs.xlsx")},className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:y.export}),(0,o.jsx)("button",{onClick:()=>{g(e=>"en"===e?"vi":"en")},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"en"===p?"Tiếng Việt":"English"})]})]}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full bg-white border border-gray-300",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:y.date}),(0,o.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:y.task}),(0,o.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:y.source}),(0,o.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:y.product}),(0,o.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:y.price}),(0,o.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:y.note}),(0,o.jsx)("th",{className:"px-6 py-3 border-b border-gray-300 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:y.action})]})}),(0,o.jsx)("tbody",{children:x.map(e=>e&&e.date?(0,o.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap border-b border-gray-300",children:new Date(e.date).toLocaleDateString("vi-VN")}),(0,o.jsx)("td",{className:"px-6 py-4 border-b border-gray-300",children:e.task}),(0,o.jsx)("td",{className:"px-6 py-4 border-b border-gray-300",children:e.source}),(0,o.jsx)("td",{className:"px-6 py-4 border-b border-gray-300",children:e.product}),(0,o.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap border-b border-gray-300",children:[e.price.toLocaleString("vi-VN")," đ"]}),(0,o.jsx)("td",{className:"px-6 py-4 border-b border-gray-300",children:e.notes}),(0,o.jsxs)("td",{className:"px-6 py-4 border-b border-gray-300",children:[(0,o.jsx)("button",{onClick:()=>b(e),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-2",children:y.edit}),(0,o.jsx)("button",{onClick:()=>f(e.id),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",children:y.delete})]})]},e.id):null)})]})})]}):(0,o.jsx)("p",{children:y.loginRequired})}},6008:function(e,t,r){e.exports=r(794)}},function(e){e.O(0,[662,913,87,661,394,253,769,744],function(){return e(e.s=3367)}),_N_E=e.O()}]);